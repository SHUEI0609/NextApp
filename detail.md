# 「コード版Pixiv（仮）」要件定義書

## 1. プロダクト概要
エンジニアやプログラミング学習者が、自身が書いたコード（スニペット〜複数ファイルのプロジェクト）を気軽に投稿・共有できるプラットフォーム。閲覧者は多様な言語のコードから学びを得て、いいねやブックマークで作品を評価・管理できる。UI/UXはPixivをベンチマークとし、直感的でスムーズな操作性を目指す。

## 2. システム・技術スタック
- **フロントエンド / バックエンド:** Next.js (App Router)
- **データベースORM:** Prisma
- **データベース / ストレージ:** Supabase (PostgreSQL / Supabase Storage)
  - *※プロフィール画像などのファイル保存にもSupabaseを利用*
- **インフラ / デプロイ:** Vercel
- **認証:** NextAuth.js (Auth.js) または Supabase Auth

## 3. 機能要件

### 3.1. ユーザー・認証機能
- **新規登録・ログイン:**
  - GitHubアカウント連携（OAuth）
  - メールアドレスとパスワードによる認証
- **プロフィール機能:**
  - アイコン画像、自己紹介文の設定
  - 自身の投稿コード一覧の表示
- **フォロー機能:**
  - 他のユーザーをフォロー / フォロー解除できる

### 3.2. 投稿・コンテンツ管理機能
- **コード投稿:**
  - 多様なプログラミング言語（Python、Go、Julia、TypeScriptなど）のシンタックスハイライト対応
  - 単一ファイルから複数ファイルの投稿まで対応
  - タイトル、説明文、タグ（複数）の設定
- **下書き機能:** 途中で保存し、非公開のまま保持できる
- **編集・削除:** 投稿後の内容修正、および投稿自体の削除ができる

### 3.3. 閲覧・検索・発見機能
- **タイムライン（トップページ）:**
  - **総合トレンド:** 「いいねが多く、かつ新しい投稿」をアルゴリズムで表示
  - **フォロー中:** フォローしているユーザーの新着投稿のみを表示する専用タブ
- **検索機能:**
  - タグ検索
  - 使用言語による絞り込み検索
- **関連コード表示（レコメンド）:**
  - 作品閲覧画面の下部に、同じタグや言語を用いた「関連するコード」を自動表示する

### 3.4. ソーシャル・リアクション機能
- **いいね（公開評価）:** 素晴らしいコードに対する気軽な賞賛。トレンド順位に影響する
- **ブックマーク（非公開保存）:** ユーザーが個人的に後で見返すための保存機能
- **コメント機能:** 投稿全体に対する、気軽な感想や質問を書き込める一般的なコメント欄

### 3.5. 安全性・運用機能
- **通報機能:** ユーザーが不適切な投稿やスパムを運営に報告できる
- **ブロック機能:** 特定のユーザーの投稿やコメントを自身の画面から非表示にする

## 4. 非機能要件・UI/UX方針
- **マルチデバイス対応（レスポンシブ）:** PC・スマートフォンからのアクセス割合を50:50と想定し、両デバイスで最適化されたレイアウトを提供する。
- **ファイル切り替えUI:**
  - **スマートフォン:** 画面の横スワイプ操作で複数ファイルを直感的に切り替えられる
  - **PC:** タブクリックや矢印ボタンによる切り替え
- **Pixivライクな操作感:** VercelとNext.jsの連携による高速な画面遷移、モーダルウィンドウの活用、非同期通信による「いいね/ブックマーク」の即時反映など、リッチなCSS/JavaScriptを駆使した快適な閲覧体験。