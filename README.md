# Codex

## 概要
エンジニアやプログラミング学習者が、自身が書いたコード（スニペット〜複数ファイルのプロジェクト）を気軽に投稿・共有できるプラットフォームです。閲覧者は多様な言語のコードから学びを得て、いいねやブックマークで作品を評価・管理できます。UI/UX は画像投稿サイトのような直感的で作品（コード）ベースのコミュニティ体験を提供することで、コードを通じた新しいコミュニケーションや学習機会が生まれるのではないかと考え、完全オリジナルの本アプリを開発しました。

## 開発の背景・経緯
プログラミング学習や個人開発の過程で、「自分が書いたコードを気軽にストックし、他の人と共有できるモダンなプラットフォームが欲しい」と感じたことが開発のきっかけです。既存のコード共有サービスは多くありますが、画像投稿サイトのような直感的な作品（コード）ベースのコミュニティ体験を提供することで、コードを通じた新しいコミュニケーションや学習機会が生まれるのではないかと考え、完全オリジナルの本アプリを開発しました。

## 公開 URL
- **アプリ:** [https://codeapp-pi.vercel.app/](https://codeapp-pi.vercel.app/)  
- **GitHub:** [https://github.com/shuei0609/NextApp](https://github.com/shuei0609/NextApp)

---

## 特徴と機能

### 1. 多言語対応コードビューア

シンタックスハイライト付きのコードビューアで、Python・Go・TypeScript・Julia など多様な言語に対応しています。複数ファイルの投稿にも対応しており、タブで切り替えながらコードを閲覧できます。

![コードビューア](image/スクリーンショット%202026-02-24%20000208.png)

### 2. タイムライン（トレンド / 新着 / フォロー中）

トップページには「トレンド」「新着」「フォロー中」の3つのタブがあり、トレンドタブでは「いいね数 × 新しさ」のスコアリングアルゴリズムで話題のコードを自動的に上位表示します。

![タイムライン](image/スクリーンショット%202026-02-23%20235234.png)

### 3. ユーザー認証 & プロフィール

メールアドレスとパスワードによる認証機能を実装。ユーザープロフィールではアイコン画像や自己紹介文の設定、投稿コード一覧の表示が可能です。

![ログイン画面](image/スクリーンショット%202026-02-23%20235530.png)

### 4. コード投稿機能

タイトル・説明文・タグ・複数のコードファイルを添えて投稿できます。各ファイルごとに言語を指定でき、下書き保存にも対応しています。

![投稿画面](image/スクリーンショット%202026-02-23%20235724.png)

### 5. ソーシャル機能（いいね / ブックマーク / コメント）

投稿に対するいいね・ブックマーク・コメント機能を搭載。いいねはトレンドの順位に影響し、ブックマークは非公開の個人保存として利用できます。

![投稿詳細](image/スクリーンショット%202026-02-23%20235859.png)

---

## 使用技術（技術スタック）

### 言語・フレームワーク

| 技術 | バージョン | 用途 |
|------|-----------|------|
| TypeScript | 5 | 型安全な開発全般 |
| Next.js | 16 (App Router) | フロントエンド / バックエンド |
| React | 19 | UI コンポーネント |
| Prisma | 6 | ORM / マイグレーション |

### 主要ライブラリ

| ライブラリ | 用途 |
|-----------|------|
| NextAuth.js v5 | Credentials 認証 |
| Prism.js | シンタックスハイライト |
| bcryptjs | パスワードハッシュ化 |
| react-hot-toast | 通知 UI |
| react-icons | アイコン |

### 開発ツール・サービス

| ツール | 用途 |
|-------|------|
| VS Code | エディタ |
| Supabase | PostgreSQL データベース / ストレージ |
| Vercel | ホスティング / CI/CD |
| GitHub | バージョン管理 |
| GitHub Actions | 定期 Ping (Supabase 停止防止) |

### システム構成図

```
┌─────────────┐       ┌──────────────┐       ┌────────────────┐
│   Browser   │──────▶│   Vercel     │──────▶│   Supabase     │
│  (React 19) │◀──────│  (Next.js)   │◀──────│  (PostgreSQL)  │
└─────────────┘       │              │       └────────────────┘
                      │  App Router  │
                      │  API Routes  │
                      │  NextAuth.js │
                      └──────────────┘
                             ▲
                             │
                      ┌──────────────┐
                      │   GitHub     │
                      │  (main push) │
                      │  CI/CD 連携  │
                      └──────────────┘
```

---

## こだわりポイント・工夫した点

###  UI/UX とデザインのこだわり
- **Pixiv ライクな直感的なインターフェース:** Vanilla CSS でカスタムデザインシステムを一から構築。ブルーとダークグレーを基調としたモダンなカラーパレットを採用し、プログラミングコードの可読性を高める配色にこだわりました。
- **レスポンシブデザインとアニメーション:** PC・タブレット・スマートフォンの全画面サイズに最適化。ボタンのホバーエフェクトや、投稿カードの浮かび上がるような滑らかなマイクロアニメーションを取り入れ、触っていて心地よいUIを実現しています。
- **快適なコード閲覧体験:** Prism.js を用いたシンタックスハイライトに加え、複数ファイルを含むプロジェクト投稿でもタブ切り替えでスムーズに閲覧できる「ファイルタブビューア」を独自開発しました。

###  パフォーマンスとアーキテクチャの工夫
- **Next.js Server Components のフル活用:** App Router の特性を活かし、タイムラインや記事詳細などのデータ取得処理をサーバーサイドコンポーネントで直接実行。API リクエストのオーバーヘッドを削減し、初回ページロードの高速化を図りました。
- **独自のトレンドアルゴリズム構築:** 単純な「いいね順」ではなく、「いいね数 × 新しさ（時間減衰）」を組み合わせた独自のスコアリングアルゴリズムを実装し、常に鮮度の高い活発な投稿が上位に表示される仕組みを作りました。

###  バックエンド連携と技術的挑戦
- **Prisma v6 と Supabase の最新スタック統合:** Prisma v6 の最新仕様である `@prisma/adapter-pg` を用いて Supabase のコネクションプーリング (Pooler) に接続。環境構築やデプロイ時のSSLエラー・キャッシュ問題など多くの壁にぶつかりましたが、設定ファイルや Vercel のビルドスクリプトを最適化することで安定した運用基盤を確立しました。
- **セキュアな認証基盤:** NextAuth.js v5 (Beat) と bcryptjs を組み合わせた堅牢な Credentials 認証を実装し、パスワードのハッシュ化を含めた安全なユーザー管理を実現しています。

---

## 既知の課題と今後の展望

### 既知の課題
- GitHub OAuth 連携が未実装
- フォロー中タブのフィルタリングが仮実装

### 今後の展望
- GitHub OAuth によるソーシャルログインの実装
- タグ検索・言語別フィルタリング機能の強化
- 関連コードのレコメンド機能
- 通報・ブロック機能の実装
- PWA 対応によるモバイル体験の向上

---

## ローカル開発

### セットアップ

```bash
# リポジトリをクローン
git clone https://github.com/shuei0609/NextApp.git
cd nextapp

# 依存パッケージのインストール
npm install

# 環境変数の設定
cp .env.example .env.local
# .env.local に DATABASE_URL, DIRECT_URL, NEXTAUTH_SECRET, NEXTAUTH_URL を設定

# Prisma クライアント生成 & DB 同期
npx prisma generate
npx prisma db push

# 開発サーバー起動
npm run dev
```

http://localhost:3000 にアクセスして確認してください。

---

## データベース設計

```
User ──┬── Post ──── CodeFile
       │       ├── Like
       │       ├── Bookmark
       │       └── Comment
       ├── Follow
       ├── Report
       └── Block
```

主要モデル: User, Post, CodeFile, Like, Bookmark, Comment, Follow, Report, Block

## 開発期間・体制

- **開発体制:** 個人開発
- **開発期間:** 2026/02/19 ~ 2026/02/24 (約20時間)

---

## 連絡先

- **ポートフォリオ:** [https:/github.io/shuei0609/MyPortfolio]
- **GitHub:** [https://github.com/shuei0609](https://github.com/shuei0609)